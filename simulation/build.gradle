model {
    components {
        preseasonSimulation(NativeLibrarySpec) {
            targetPlatform 'desktop'

            sources.cpp {
                source {
                    srcDir 'src/main/cpp'
                }
                exportedHeaders {
                    srcDir 'src/main/include'
                }
            }

            binaries.all {
                lib project: ':common', library: 'preseasonCommon', linkage: 'static'
            }

            // No need to build shared libraries that we never use.
            binaries.withType(SharedLibraryBinarySpec) {
                buildable = false
            }

            useLibrary(it, "hal", "opencv")
        }
    }
}